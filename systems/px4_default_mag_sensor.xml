<?xml version="1.0"?>
<system name="PX4 Magnetometer Sensor">
<!--  =================================================================
This is a generic JSBSim system file to simulate the mag behavior for PX4.
  =================================================================  -->

    <!-- Enable Individual Component Failure -->
    <property value="1">px4/mag_x/on</property>
    <property value="1">px4/mag_y/on</property>
    <property value="1">px4/mag_z/on</property>

    <channel name="Magnetometer-X" execute="px4/mag_x/on">
        <magnetometer name="Default-Mag-X">
            <location unit="M">
                <x> 0 </x>
                <y> 0 </y>
                <z> 0.345 </z>
            </location>
            <axis> X </axis>
            <!--
            <noise variation="ABSOLUTE" distribution="GAUSSIAN"> 0.01 </noise>
            <lag> number </lag>
            <orientation unit="DEG">
                <x> number </x>
                <y> number </y>
                <z> number </z>
            </orientation>
            <quantization name="name">
                <bits> number </bits>
                <min> number </min>
                <max> number </max>
            </quantization>
            <drift_rate> number </drift_rate>
            <bias> number </bias>
            <gain> number </gain>
            -->
            <output> px4/mag-x </output>
        </magnetometer>
    </channel>

    <channel name="Magnetometer-Y" execute="px4/mag_y/on">
        <magnetometer name="Default-Mag-Y">
            <location unit="M">
                <x> 0 </x>
                <y> 0 </y>
                <z> 0.345 </z>
            </location>
            <axis> Y </axis>
            <!--
            <noise variation="ABSOLUTE" distribution="GAUSSIAN"> 0.01 </noise>
            <lag> number </lag>
            <orientation unit="DEG">
                <x> number </x>
                <y> number </y>
                <z> number </z>
            </orientation>
            <quantization name="name">
                <bits> number </bits>
                <min> number </min>
                <max> number </max>
            </quantization>
            <drift_rate> number </drift_rate>
            <bias> number </bias>
            <gain> number </gain>
            -->
            <output> px4/mag-y </output>
        </magnetometer>
    </channel>

    <channel name="Magnetometer-Z" execute="px4/mag_z/on">
        <magnetometer name="Default-Mag-Z">
            <location unit="M">
                <x> 0 </x>
                <y> 0 </y>
                <z> 0.345 </z>
            </location>
            <axis> Z </axis>
            <!--
            <noise variation="ABSOLUTE" distribution="GAUSSIAN"> 0.01 </noise>
            <lag> number </lag>
            <orientation unit="DEG">
                <x> number </x>
                <y> number </y>
                <z> number </z>
            </orientation>
            <quantization name="name">
                <bits> number </bits>
                <min> number </min>
                <max> number </max>
            </quantization>
            <drift_rate> number </drift_rate>
            <bias> number </bias>
            <gain> number </gain>
            -->
            <output> px4/mag-z </output>
        </magnetometer>
    </channel>
</system>
